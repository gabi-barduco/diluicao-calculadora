<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de Dilui√ß√£o</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <h1>üî¨ Calculadora de Dilui√ß√£o</h1>
    <p>Ferramenta pr√°tica para preparar solu√ß√µes de forma r√°pida e precisa.</p>
  </header>

  <main>
    <section class="card">
      <h2>Preencha os dados</h2>
      <form id="calcForm">
        <div class="form-group">
          <label for="concInicial">Concentra√ß√£o inicial (%)</label>
          <input type="number" id="concInicial" step="0.01" required>
        </div>

        <div class="form-group">
          <label for="concFinal">Concentra√ß√£o final desejada (%)</label>
          <input type="number" id="concFinal" step="0.01" required>
        </div>

        <div class="form-group">
          <label for="volFinal">Volume final (mL)</label>
          <input type="number" id="volFinal" step="0.01">
        </div>

        <div class="form-group">
          <label for="volSolvente">Volume de solvente (mL)</label>
          <input type="number" id="volSolvente" step="0.01">
        </div>

        <div class="buttons">
          <button type="button" id="calcularBtn">Calcular</button>
          <button type="button" id="salvarBtn">Salvar Resultado</button>
          <button type="button" id="historicoBtn">Ver Hist√≥rico</button>
        </div>
      </form>
    </section>

    <section class="card resultado">
      <h2>Resultado</h2>
      <p id="resultado">Preencha os campos e clique em "Calcular".</p>
    </section>

    <section class="card historico" id="historicoSecao" style="display:none;">
      <h2>Hist√≥rico de C√°lculos</h2>
      <ul id="historicoLista"></ul>
    </section>
  </main>

  <footer>
    <p>¬© 2025 - Sua Marca | Ferramenta de apoio, confira sempre antes do uso pr√°tico.</p>
  </footer>

  <script>
    const resultadoEl = document.getElementById("resultado");
    const historicoSecao = document.getElementById("historicoSecao");
    const historicoLista = document.getElementById("historicoLista");

    document.getElementById("calcularBtn").addEventListener("click", calcular);
    document.getElementById("salvarBtn").addEventListener("click", salvarResultado);
    document.getElementById("historicoBtn").addEventListener("click", mostrarHistorico);

    function calcular() {
      const ci = parseFloat(document.getElementById("concInicial").value);
      const cf = parseFloat(document.getElementById("concFinal").value);
      const vf = parseFloat(document.getElementById("volFinal").value);
      const vs = parseFloat(document.getElementById("volSolvente").value);

      if (isNaN(ci) || isNaN(cf) || (isNaN(vf) && isNaN(vs))) {
        resultadoEl.textContent = "‚ö†Ô∏è Preencha corretamente todos os campos necess√°rios.";
        return;
      }

      if (cf >= ci) {
        resultadoEl.textContent = "‚ö†Ô∏è A concentra√ß√£o final deve ser menor que a inicial.";
        return;
      }

      let volInicial, volSolvente, volFinal;

      if (!isNaN(vf)) {
        volInicial = (cf * vf) / ci;
        volSolvente = vf - volInicial;
        volFinal = vf;
      } else {
        volInicial = (vs * cf) / (ci - cf);
        volFinal = volInicial + vs;
        volSolvente = vs;
      }

      resultadoEl.innerHTML = `
        <strong>Resultados do c√°lculo:</strong><br>
        ‚û§ Volume da solu√ß√£o inicial: <b>${volInicial.toFixed(2)} mL</b><br>
        ‚û§ Volume de solvente: <b>${volSolvente.toFixed(2)} mL</b><br>
        ‚û§ Volume final: <b>${volFinal.toFixed(2)} mL</b>
      `;
    }

    function salvarResultado() {
      const texto = resultadoEl.innerText;
      if (texto.includes("Resultados")) {
        const data = new Date().toLocaleString();
        const entrada = { data, texto };
        let historico = JSON.parse(localStorage.getItem("historicoDil")) || [];
        historico.push(entrada);
        localStorage.setItem("historicoDil", JSON.stringify(historico));
        alert("‚úÖ Resultado salvo com sucesso!");
      } else {
        alert("‚ö†Ô∏è Calcule antes de salvar.");
      }
    }

    function mostrarHistorico() {
      const historico = JSON.parse(localStorage.getItem("historicoDil")) || [];
      historicoLista.innerHTML = "";
      if (historico.length === 0) {
        historicoLista.innerHTML = "<li>Nenhum c√°lculo salvo ainda.</li>";
      } else {
        historico.forEach(item => {
          const li = document.createElement("li");
          li.textContent = `[${item.data}] ${item.texto}`;
          historicoLista.appendChild(li);
        });
      }
      historicoSecao.style.display = "block";
    }
  </script>
</body>
</html>
